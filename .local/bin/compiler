#!/bin/sh

file=$(readlink -f "$1")
dir=${file%/*}
base="${file%.*}"
ext="${file##*.}"

cd "$dir" || exit 1

case "$ext" in
    c)
        gcc -Wall -Wextra -O2 "$file" -o "$base" -lm
        ;;
    cpp)
        g++ -Wall -Wextra -Wpedantic -Wconversion -Wshadow -O2 "$file" -o "$base"
        ;;
    go)
        go build -o "$base" "$file"
        ;;
    md)
        pandoc -s --pdf-engine=typst -o "$base.pdf" "$file"
        ;;
    rs)
        rustc -o "$base" "$file"
        ;;
    *)
        exit 1
        ;;
esac
